<html>
<head>
	<title>MidiGet function</title>
	<style type="text/css">* {text-decoration: none; border-style: none; } span {width: 30%; vertical-align: top; } table td { border-style: double; border-width: 3px; }</style>
</head>
<body>
<h2>MidiGet</h2>
<pre><code>QWORD</code> WINAPI MidiGet
(
	HANDLE hSequence, 
	<code>DWORD</code> dwWhat
);</pre>
<p>This function retrieves sequence specific information.</p>
<h3>Parameters</h3>
<ul>
<li><strong>hSequence</strong>: handle of the sequence from where information is retrieved</li>
<li><strong>dwWhat</strong>: constant indicating the information required. See remarks below</li>
</ul>
<h3>Return values</h3>
<p>Returns the desired data or <code>BRELS_ERROR</code> (0xFFFFFFFFFFFFFFFF) if an error occurred. The reasons for an error are an invalid sequence handle or an invalid information constant.</p>
<h3>Remarks</h3>
<p>The following table lists the information you can retrieve using <strong>MidiGet</strong>:</p>
<table>
<tr><td><strong>Constant</strong></td><td><strong>Returned value</strong></td></tr>
<tr><td> BEAT_SIZE                 <td><code>WORD</code> value informing the number of ticks in a beat or quarter note</td></tr>
<tr><td> SOLO_TRACK                <td><code>WORD</code> value informing the current solo track or <code>NO_SOLO</code> (0xFFFF) if there is none </td></tr>
<tr><td> TICK_INTERVAL             <td><code>QWORD</code> value informing the number of microseconds per tick</td></tr>
<tr><td> SKIP_INTERVAL             <td><code>QWORD</code> value informing how many microseconds were skipped in order to keep the sequence playing correctly</td></tr>
<tr><td> BYTE_COUNT                <td><code>DWORD</code> value corresponding to the size in bytes of the sequence when encoded</td></tr>
<tr><td> TICK_COUNT                <td><code>DWORD</code> value corresponding to the length in ticks of the sequence</td></tr>
<tr><td> TIME_COUNT                <td><code>QWORD</code> value corresponding to the length in microseconds of the sequence</td></tr>
<tr><td> EVENT_COUNT               <td><code>DWORD</code> value informing the number of events in the sequence</td></tr>
<tr><td> TRACK_COUNT               <td><code>WORD</code> value informing the number of tracks of the sequence</td></tr>
<tr><td> CURRENT_TIME              <td><code>QWORD</code> value corresponding to the sequence's current time position in microseconds</td></tr>
<tr><td> CURRENT_TICKS             <td><code>DWORD</code> value corresponding to the current tick position of the sequence</td></tr>
<tr><td> CURRENT_TEMPO             <td><code>QWORD</code> value corresponding to the current tempo (in microseconds per beat)</td></tr>
<tr><td> CALLBACK_HWND             <td><code>HWND</code> value informing the window which will receive callback messages</td></tr>
<tr><td> CALLBACK_MESSAGE          <td><code>UINT</code> value corresponding to the message sent to the callback window</td></tr>
<tr><td> CALLBACK_PROCESSED        <td><code>BOOL</code>  value indicating whether a previously sent callback message was processed and another is allowed to be sent</td></tr>
<tr><td> MIDI_DEVICE               <td><code>DWORD</code> value corresponding to the ID of the midiOut device used by the sequence</td></tr>
<tr><td> MIDI_HANDLE               <td><code>HMIDIOUT</code> value correspoding to the midiOut handle used by the sequence</td></tr>
<tr><td> MIDI_HEADER               <td>Pointer to a <a href="brels_midi_header.html">BRELS_MIDI_HEADER</a> structure corresponding to the MIDI header in the encoded sequence. Use <a href="midifreebuffer.html">MidiFreeBuffer</a> to deallocate this pointer later.</td></tr>
<tr><td> MIDI_LOOP                 <td><code>BOOL</code>  value indicating if the sequence will restart playing when playback finishes</td></tr>
<tr><td> MIDI_PRECISION            <td><code>QWORD</code> value indicating the number of microseconds in the multimedia timer used for playback.</td></tr>
<tr><td> MIDI_STATUS               <td><code>DWORD</code> value indicating the current status of the sequence: <code>MIDI_BUSY</code>, <code>MIDI_STOP</code>, <code>MIDI_PAUSE</code> or <code>MIDI_PLAY</code></td></tr>
<tr><td> MIDI_DONE                 <td><code>BOOL</code>  value indicating whether the sequence is doing a playback operation (<code>FALSE</code>) or is waiting until it is time to play the next event (<code>TRUE</code>)</td></tr>
</table>
<p>Always make a cast to the apropriate data type when retrieving information using <strong>MidiGet</strong>, like in the example below:</p>
<h3>Example</h3>
<pre>HANDLE Sequence;
WORD wBeatSize;
DWORD dwTicks;
QWORD qwTime;
HWND window;
UINT uMsg;
HANDLE hmo;
BOOL looping;
LPBRELS_MIDI_HEADER lpbmh;

// Open the sequence
MidiOpen("test1.mid", NO_DEVICE, &Sequence);

// Get several types of values
wBeatSize = (WORD) MidiGet(Sequence, BEAT_SIZE);
dwTicks = (DWORD) MidiGet(Sequence, CURRENT_TICKS);
qwTime = (QWORD) MidiGet(Sequence, CURRENT_TIME);
window = (HWND) MidiGet(Sequence, CALLBACK_HWND);
uMsg = (UINT) MidiGet(Sequence, CALLBACK_MESSAGE);
hmo = (HMIDIOUT) MidiGet(Sequence, MIDI_HANDLE);
looping = (BOOL) MidiGet(Sequence, MIDI_LOOP);
lpbmh = (LPBRELS_MIDI_HEADER) MidiGet(Sequence, MIDI_HEADER);

// Free the allocated data
MidiFreeBuffer(lpbmh);

// Close the sequence
MidiClose(Sequence);</pre>
<hr/>
<h3>Further information</h3>
<p>Released in November 19th, 2003<br/>
Updated in April 29th, 2004<br/>
Property of <strong>Bre</strong>no de <strong>L</strong>ima <strong>S</strong>armento<br/>
Home page: <a href="http://www27.brinkster.com/brels">http://www27.brinkster.com/brels</a><br/>
E-mail: <a href="mailto:breno_sarmento@hotmail.com">breno_sarmento@hotmail.com</a><br/>
ICQ: <a href="http://web.icq.com/whitepages/about_me/1,,,00.html?to=%25U&Uin=78977999">78977999</a> (<img src="http://web.icq.com/whitepages/online?icq=78977999&img=2" />)</p>
</body>
</html>